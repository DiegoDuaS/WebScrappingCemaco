if (window.location.href.indexOf("https://www.cemaco.com/") > -1) {
  //console.log("WaitYotpo Producion");
  console.log("Entra a preprod con waityotpo");
  window.onload = function () {
    //Esperar a que carge todo
    console.log("On load window");
    //evaluarElementoBtn();
    modificarEstilosYotpo();

    setInterval(() => {
      $(".write-question-review-button:first").on("click", function () {
        // Aquí colocas el código que quieres que se ejecute cuando se haga clic en el elemento
        console.log("Escribir opinion se hizo click");
        $(".write-question-review-button:first").hide();
        $(".write-question-review-button:eq(1)").show();
        $(".write-question-review-button:eq(1)").addClass(
          "write-question-review-button-active"
        );
        $(".write-question-review-button:eq(1)").addClass(
          "buttonHideOpinionPregunta"
        );
      });

      $(".write-question-review-button:eq(1)").on("click", function () {
        console.log("Se hizo click en haz una pregunta");
        $(".write-question-review-button:eq(1)").hide();
        $(".write-question-review-button:first").show();
        $(".write-question-review-button:first").addClass(
          "write-question-review-button-active"
        );
      });
    }, 3000);
  };

  /*
  var btnEscribirOpinion = $(".write-question-review-button:first");
  var btnHazPregunta = $(".write-question-review-button:eq(1)");

  const evaluarElementoBtn = setInterval(() => {
    btnEscribirOpinion = $(".write-question-review-button:first");
    btnHazPregunta = $(".write-question-review-button:eq(1)");

    console.log("timeOutYopo boton opinion");
    console.log(btnEscribirOpinion);
    if (btnEscribirOpinion.length > 0) {
      console.log(btnEscribirOpinion);
      console.log("Elemento boton opinion cargado");
      clearInterval(evaluarElementoBtn);
    } else {
      console.log(btnEscribirOpinion);
      console.log("Elemento no fue cargado");
    }
  }, 4000); */

  async function modificarEstilosYotpo() {
    console.log("Entra a modificar estilos");
    await waitForYotpoToLoad(); // Esperar a que Yotpo esté completamente cargado

    var head = document.getElementsByTagName("head")[0];
    var link = document.createElement("link");
    link.href =
      "https://cemacogt.vteximg.com.br/arquivos/yotpoioprod.css?v=20240614-1031";
    link.type = "text/css";
    link.rel = "stylesheet";
    link.media = "screen,print";
    head.appendChild(link);

    var link2 = document.createElement("link");
    link2.href =
      "https://cemacogt.vteximg.com.br/arquivos/yotpoio.css?v=20240614-1031";
    link2.type = "text/css";
    link2.rel = "stylesheet";
    link2.media = "screen,print";
    head.appendChild(link2);

    $("#yotpo_testimonials_btn").hide();

    setTimeout(() => {
      console.log("Cambio de texto");
      $(".write-question-review-button-text").text("Haz una pregunta");
      $(".write-question-review-button-text")
        .first()
        .text("Escribe una opini\u00F3n");
      $("#yotpo_testimonials_btn").hide();
      $(
        ".yotpo-default-button .write-review-button .write-first-review-button"
      ).text("Eres el primero en escribir una opini\u00F3n");

      $(".yotpo-dropdown-button:eq(0)").text("Filtro por puntuación");
      //agregarResenaReady();
    }, 3000);
  }

  /*
  const agregarResenaReady = () => {
    function waitForElement(selector) {
      return new Promise((resolve) => {
        $(document).ready(() => {
          console.log("Documento listo para agregar texto resena");
          const element = $(selector);
          if (element.length) {
            resolve(element);
          } else {
            const observer = new MutationObserver(() => {
              const element = $(selector);
              if (element.length) {
                console.log("Antes de disconnect");
                observer.disconnect();
                console.log("Paso el disconnect");
                resolve(element);
              }
            });
            observer.observe(document.body, {
              childList: true,
              subtree: true,
            });
          }
        });
      });
    } 

    async function miFuncion() {
      try {
        const elemento = await waitForElement(
          ".yotpo .yotpo-display-wrapper .bottom-line-items-container-desktop"
        );
        console.log(
          "El elemento con id 'miElemento' está completamente cargado:",
          elemento
        );
        // Puedes realizar aquí las acciones que desees con el elemento
        var tituloResena = $("<div></div>").text("Rese\u00F1as");
        tituloResena.addClass("yotpo__tituloResena");
        elemento.prepend(tituloResena);
      } catch (error) {
        console.error("Error al esperar el elemento:", error);
      }
    }

    // Llamar a la función
    miFuncion();
  }; */

  // Función para esperar a que Yotpo esté completamente cargado
  function waitForYotpoToLoad() {
    return new Promise((resolve) => {
      const yotpoNavContent = document.querySelector(".yotpo-nav-content");
      console.log(yotpoNavContent);
      if (window.hasOwnProperty("yotpo")) {
        console.log("Encontro Yotpo");
        //timeout para esperar que el boton de yotpo cargue

        resolve();
      } else {
        console.log("Content null");
        // Si Yotpo no está cargado todavía, esperar y verificar nuevamente
        const interval = setInterval(() => {
          if (window.hasOwnProperty("yotpo") && yotpoNavContent !== null) {
            console.log("Encontro yotpo pasados 1000");
            clearInterval(interval);
            resolve();
          }
        }, 500); // time 500
      }
    });
  }
} else {
  console.log("Preprod yotpo");
}
