(()=>{var ze=Object.defineProperty,Ke=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var N=(t,e,r)=>e in t?ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))qe.call(e,r)&&N(t,r,e[r]);if(ae)for(var r of ae(e))Qe.call(e,r)&&N(t,r,e[r]);return t},I=(t,e)=>Ke(t,Ye(e));var le=(t,e,r)=>(N(t,typeof e!="symbol"?e+"":e,r),r);var l=(t,e,r)=>new Promise((n,o)=>{var i=a=>{try{c(r.next(a))}catch(f){o(f)}},s=a=>{try{c(r.throw(a))}catch(f){o(f)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,s);c((r=r.apply(t,e)).next())});var H=class{constructor(e={}){e=Object.assign({resolveTimeout:null,resolveValue:!0,rejectTimeout:null,rejectValue:!1},e),this._promise=new Promise((s,c)=>{this.resolve=s,this.reject=c}),this.then=this._promise.then.bind(this._promise),this.catch=this._promise.catch.bind(this._promise),this.finally=this._promise.finally.bind(this._promise),this[Symbol.toStringTag]="Promise";let{resolveTimeout:r,resolveValue:n,rejectTimeout:o,rejectValue:i}=e;r&&setTimeout(()=>this.resolve(n),r),o&&setTimeout(()=>this.reject(i),o)}};var V="layer",F="chat",M="quiz";function ce(t){return t.reduce(function(e,r){return e[r]=new H,e},{})}function ue(t){return function(e,r){return l(this,null,function*(){if(!t[e])throw new Error(`unknown "${e}" app!`);r(yield t[e])})}}var B="__DF_DEBUG_MODE__",de="true",y=window.sessionStorage;function he(){y.setItem(B,de)}function me(){y.removeItem(B)}function z(){return y.getItem(B)===de}function L(t){return y.getItem(t)||window[t]}function C(t,e){y.setItem(t,e)}function h(...t){z()&&console.log("[doofinder]",...t)}var Je=10,Ge=500;function fe(t,e={}){let r=document.querySelector(t);return r?Promise.resolve(r):new Promise((n,o)=>{let i=0,s=null,c=e.interval||Ge,a=e.times||Je;s=setInterval(function(){i++<a?(r=document.querySelector(t),r&&(clearInterval(s),n(r))):(clearInterval(s),o(`selector '${t}' not found`))},c)})}var pe=3,_e="df:trigger:click",We="df:trigger:focus",Ze="df:trigger:input",ge="df:trigger:submit",K=class{constructor(e){this._minCaptureLength=pe,this._elementSelector=e,this.__chooseTriggerElement__(e),this._eventBus=null,this._eventsQueue=[],this._events=[["click",this.handleClick.bind(this),!0],["focus",this.handleFocus.bind(this),!0],["input",this.handleInput.bind(this),!1],["submit",this.handleSubmit.bind(this),!0],["keypress",this.handleKeypress.bind(this),!0],["keyup",this.handleKeypress.bind(this),!0],["keydown",this.handleKeypress.bind(this),!0]],this._handleSubmit=!1,this._enabled=!1,this._redirection=null}__chooseTriggerElement__(e){this._element=Array.from(document.querySelectorAll(e)).find(r=>r.offsetWidth>0&&r.offsetHeight>0)}updateQuery(e=""){return l(this,null,function*(){let r=yield this.getElement();r instanceof HTMLInputElement&&(r.value=e)})}focus(){return l(this,null,function*(){let e=yield this.getElement();e instanceof HTMLInputElement&&e.focus()})}setCaptureLength(e){this._minCaptureLength=e||pe}getElement(){return l(this,null,function*(){if(!(!this._enabled||!this._elementSelector)){if(!this._element)try{this._element=yield fe(this._elementSelector)}catch(e){this._element=void 0}return this._element}})}get enabled(){return this._enabled}set enabled(e){if(this._enabled!==!!e){this._enabled=!!e;let r=document[`${this._enabled?"add":"remove"}EventListener`];this._events.forEach(n=>r(...n))}}get captureSubmit(){return this._handleSubmit}set captureSubmit(e){this._handleSubmit=!!e}get redirection(){return this._redirection}set redirection(e){this._redirection=e}setEventBus(e){this._eventBus=e}flushMessages(){var e;if(this._eventsQueue=[...new Map(this._eventsQueue).entries()],this._eventsQueue.length>0){let r=this._eventsQueue.shift();for(;r&&r.length===2;)h("trigger:emit",r),(e=this._eventBus)==null||e.emit(...r),r=this._eventsQueue.shift()}else document.activeElement===this._element&&this.notify(_e,this.getPayload())}destroy(){this._events.forEach(e=>window.removeEventListener(...e))}shouldHandle(e){let r=this.getElementFromEvent(e);return r?(this._element=r,!0):!1}getPayload(e){let r={source:this._element,originalEvent:e};if(this._element instanceof HTMLInputElement){let n=this._element.value.trim();(n.length>=this._minCaptureLength||(e==null?void 0:e.type)==="keydown")&&(r.query=n)}return r}getElementFromEvent(e){if(!e.target||e.target===document||e.target===window)return;let r=e.type==="submit"?"querySelector":"closest",n=e.target[r](this._elementSelector);if(n&&!n.closest("[dfd-hook]"))return n}handleClick(e){this.shouldHandle(e)&&(e.preventDefault(),e.stopImmediatePropagation(),this.notify(_e,this.getPayload(e)))}handleFocus(e){this.shouldHandle(e)&&(e.stopImmediatePropagation(),this.notify(We,this.getPayload(e)))}handleInput(e){this.shouldHandle(e)&&this.notify(Ze,this.getPayload(e))}handleSubmit(e){this._handleSubmit&&this.shouldHandle(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.notify(ge,this.getPayload(e)))}handleKeypress(e){e.key==="Enter"&&this.shouldHandle(e)&&(!!this._redirection||this._handleSubmit)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this._redirection?window.location=this._redirection.url:e.type==="keydown"&&this.notify(ge,this.getPayload(e)))}notify(e,r){this._eventBus?this._eventBus.emit(e,r):this._eventsQueue.push([e,r]),h("[trigger]",this._eventBus?"[emit]":"[queue]",e,r)}};function Y(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));if(e)return decodeURIComponent(e[1])}var q=Object.freeze({language(t){let e=(t==null?void 0:t.replaceAll("_","-").trim().split("-"))||[];function r(n){return n?`-${n.toUpperCase()}`:""}if(e.length<3){let[n,o]=e;return`${n==null?void 0:n.toLowerCase()}${r(o)}`}else{let[n,o,i]=e;return`${n==null?void 0:n.toLowerCase()}-${o.toUpperCase()}${r(i)}`}},currency(t){return t==null?void 0:t.trim().toUpperCase()}});function Q(){return L("__DF_CDN_PREFIX__")}function g(t,e=!1){let r=L("__DF_LAYER_SERVER__")||`https://${t.toLowerCase()}-layer.doofinder.com`;return e?r.replace(/^http/,"ws"):r}var D=1;function ye(){var e;let t=[];return u(t,"source_url",encodeURIComponent(window.location.href)),u(t,"session_id",Doofinder.Session.getSessionId()),u(t,"user_id",Doofinder.Session.getUserId()),u(t,"session_alive",Doofinder.Session.isLive("chat","layer","quiz")),u(t,"last_used_apps",Doofinder.Session.getLastUsedApps()),u(t,"ga_client_id",(e=Y("_ga"))==null?void 0:e.substring(6)),u(t,"vsn","1.4.256"),t}function u(t,e,r){r!=null&&(typeof r!="string"||!!r.trim())&&t.push(`${e}=${r}`)}function Xe(t,e){var f;let{installationId:r,zone:n,language:o,currency:i}=t,c=`${g(n)}/api/${D}/installation/${r}`,a=[];return u(a,"source_url",encodeURIComponent(window.location.href)),u(a,"session_id",Doofinder.Session.getSessionId()),u(a,"session_alive",Doofinder.Session.isLive("layer","quiz","chat")),u(a,"last_used_apps",Doofinder.Session.getLastUsedApps()),u(a,"user_id",Doofinder.Session.getUserId()),u(a,"language",q.language(o||document.documentElement.getAttribute("lang"))||""),u(a,"currency",q.currency(i)||""),u(a,"ga_client_id",(f=Y("_ga"))==null?void 0:f.substring(6)),u(a,"vsn","1.4.256"),u(a,"layer_type",e),u(a,"zone",n),`${c}?${a.join("&")}`}function Se(t){let e=Q()||t.cdn_prefix;e=="https://cdn.doofinder.com/livelayer"&&(e+="/1");let r=t.vsn;return Ee(t,o=>({url:`${e}${o}?vsn=${r}`}))}function be(t){if(!t.cdn_fallback_prefix)return Se(t);let e=t.vsn,r=Q()||t.cdn_prefix+"/"+e;return Ee(t,o=>{let i=`${r}${o}`;i=r.includes("staging")?`${i}?vsn=${e}`:i;let s=`${t.cdn_fallback_prefix}${o}`;return{url:i,fallbackUrl:s}})}function Ee(t,e){return z()&&(t.js=t.js.map(r=>r.replace(/\.min\.js/i,".js"))),t.css=t.css.map(e),t.js=t.js.map(e),t}function we(t,e){return new Promise(function(r,n){fetch(Xe(t,e),{redirect:"follow"}).then(function(o){o.ok?o.json().then(function(i){r(be(i))}):n(`HTTP ${o.status} error response from server`)}).catch(o=>n(o))})}function ve(t){return l(this,null,function*(){let{chat_id:e,zone:r}=t,n=`${g(r)}/chat/${e}`,o=ye(),s=yield(yield fetch(`${n}?${o.join("&")}`,{redirect:"follow"})).json();return Se(s)})}function xe(t){return l(this,null,function*(){let{quiz_id:e,zone:r}=t,n=`${g(r)}/quiz/${e}`,o=ye(),s=yield(yield fetch(`${n}?${o.join("&")}`,{redirect:"follow"})).json();return be(s)})}function S(t){return l(this,null,function*(){let{url:e,fallbackUrl:r}=t;if(!document.querySelector(`script[src="${e}"]`)){let n=document.createElement("script");n.src=e,n.async=1,r&&(n.onerror=()=>S({url:r})),document.head.appendChild(n)}})}function b(t){return l(this,null,function*(){let{url:e,fallbackUrl:r}=t;if(!document.querySelector(`link[rel="stylesheet"][href="${e}"]`)){let n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),r&&(n.onerror=()=>b({url:r})),document.head.appendChild(n)}})}function _(t){return l(this,null,function*(){let e=document.createElement("style");e.appendChild(document.createTextNode((t||"").trim())),document.head.appendChild(e)})}function Ie(t,e){let r=e.options,n=t.hashid||r.hashid,{autoload:o,insertion_point:i,is_checkout:s}=e,c="urlHash"in t?!!t.urlHash:!!r.url_hash,a=e.layer_type;return delete t.urlHash,delete r.url_hash,I(p(p({},t),r),{autoload:o,urlHash:c,hashid:n,layerType:a,insertion_point:i,is_checkout:s})}var $=new Promise((t,e)=>{document.readyState!="loading"?t():document.addEventListener("DOMContentLoaded",()=>{t()})});function Le(t){return C("__DF_CDN_PREFIX__",t)}function Ce(t){return C("__DF_LAYER_SERVER__",t)}function E(){try{decodeURIComponent(location.href)}catch(t){throw new Error("invalid UTF-8 on url-encoded query params")}}function De(t=8){let e="";for(;e.length<t;)e=`${e}${Math.random().toString(36).substring(2)}`;return e.substr(0,t)}var $e=function(t){let e=t.slice(0,4);return RegExp(`#${e}/(category-pages|mobile-category-pages)/`)};var J="df-cookies-allowed",G=window.localStorage;function W(){G.setItem(J,"true")}function Re(){G.removeItem(J)}function R(){return JSON.parse(G.getItem(J)||"false")}var Z=class{constructor(e,r){this._bucket=e,this._store=r||window.localStorage}get data(){return JSON.parse(this._store.getItem(this._bucket))||{}}set data(e){!R()||this._store.setItem(this._bucket,JSON.stringify(e))}getItem(e){return this.data[e]}setItem(e,r){let n=this.data;n[e]=r,this.data=n}removeItem(e){let r=this.data;delete r[e],this.data=r}clear(){this.data={}}destroy(){this._store.removeItem(this._bucket)}popItem(e){let r=this.data,n=r[e];return delete r[e],this.data=r,n}};"use strict";var U=window.history,w=class{constructor({installationId:e,urlHash:r}){this._installationId=e,this._urlHash=r,this._dataStore=new Z(`${this._installationId}.category_merchandising.state`,window.sessionStorage)}get stateKey(){return w.STATE_KEY}get(){let e=this.__currentState__()||this.getFromURLHash();return this.__patchState__(e)}getHash(e){return this.__isStateValid__(e)?new URL(e).hash:""}getBackState(){if(!this.__loadBackState__())return null;let e=this.__popBackState__();return h("[category pages state] getBackState state",e),this.__patchState__(e)}getFromURLHash(){let e=window.location.hash;return this.__isStateValid__(e)?(e=e.split("#",2)[1],h("[category pages state] __fromHash__ ",e),this.__patchState__(e)):null}save(e){this.update(e)}replace(e){this.update(e)}update(e){if(!this.__isStateValid__(e))return;h("[category pages state] update state ",e),this._dataStore.setItem("currentState",e);let r=this.absoluteURL(e);U.replaceState(this.__getNewStateObject__(e),"",this._urlHash?r:"")}saveCurrentAsBackState(){this._dataStore.setItem("backState",this.__currentState__())}__currentState__(){return this._dataStore.getItem("currentState")}__loadBackState__(){return this._dataStore.getItem("backState")||!1}__popBackState__(){let e=this._dataStore.getItem("backState");return this._dataStore.removeItem("backState"),h("[category pages state] __popBackState__ ",e),e}absoluteURL(e){return window.location.origin+window.location.pathname+window.location.search+e}__getNewStateObject__(e){let r=this.absoluteURL(e);return typeof U.state=="object"&&U.state!==null?I(p({},U.state),{[w.STATE_KEY]:r}):{[w.STATE_KEY]:r}}__isStateValid__(e){return typeof e=="string"&&$e(this._installationId).test(e)}__patchState__(e){return this.__isStateValid__(e)?e.replace(/&m=[^&]*&/,"&").replace(/&m=[^&]*$/,""):null}},T=w;le(T,"STATE_KEY","doofinderCategoryPagesState");function Ue(t){return l(this,null,function*(){var s;let e=tt(t);h("[category pages] displayForSeo options: ",t,"params: ",e);let r=yield rt(e);if(h("[category pages] displayForSeo htmlContent: ",r),!r)return;let n=et(r);t.device=="mobile"&&(n.classList.remove("dfd-embedded"),n.classList.add("dfd-mobile_embedded")),t.custom_css.forEach(_);let o=(s=t.custom_properties)==null?void 0:s.join(`
`);_(`#${n.id} {
${o||""}
}`);let i=document.querySelector(t.insertion_point);i&&i.replaceWith(n)})}function et(t){let e=document.createElement("div");return e.id=`df-${De(32)}`,e.dataset.dfdView="Search",e.classList.add("dfd-root"),e.classList.add("dfd-embedded"),e.setAttribute("data-dfd-screen","category-pages"),e.insertAdjacentHTML("afterbegin",t),e}function tt(t){let{installationId:e,hashid:r,language:n,currency:o,zone:i,search:s,sort:c,urlHash:a,vars:f}=t,A=Doofinder.Session.getSessionId(),O=Doofinder.Session.getUserId(),Be=new T({installationId:e,urlHash:a}).get();return{installationId:e,hashid:r,language:n,currency:o,zone:i,state:Be,search:s,sort:c,session_id:A,user_id:O,vars:f}}function rt(t){return l(this,null,function*(){let{zone:e}=t,r=g(e),n=new URL(`${r}/api/${D}/categorypage`);return Object.keys(t).forEach(function(i){let s=t[i];typeof s=="undefined"||s==null||(typeof s=="object"&&(s=JSON.stringify(s)),n.searchParams.append(i,s))}),yield fetch(n).then(function(i){return i.ok?i.text():""})})}var P,nt=new Uint8Array(16);function X(){if(!P&&(P=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(nt)}var d=[];for(let t=0;t<256;++t)d.push((t+256).toString(16).slice(1));function Te(t,e=0){return d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]}var ot=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ee={randomUUID:ot};function it(t,e,r){if(ee.randomUUID&&!e&&!t)return ee.randomUUID();t=t||{};let n=t.random||(t.rng||X)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return Te(n)}var v=it;var Pe={canPushState(){return typeof history.pushState!="undefined"},dropLocal(t,e,r){return t.removeItem(this.localKey(e,r))},updateLocal(t,e,r,n,o){let i=this.getLocal(t,e,r),s=this.localKey(e,r),c=i===null?n:o(i);return t.setItem(s,JSON.stringify(c)),c},getLocal(t,e,r){return JSON.parse(t.getItem(this.localKey(e,r)))},updateCurrentState(t){!this.canPushState()||history.replaceState(t(history.state||{}),"",window.location.href)},pushState(t,e,r){if(this.canPushState()){if(r!==window.location.href){if(e.type=="redirect"&&e.scroll){let o=history.state||{};o.scroll=e.scroll,history.replaceState(o,"",window.location.href)}delete e.scroll,history[t+"State"](e,"",r||null);let n=this.getHashTargetEl(window.location.hash);n?n.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(r)},setCookie(t,e){document.cookie=`${t}=${e}`},getCookie(t){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${t}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(t,e){e&&Pe.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=t},localKey(t,e){return`${t}-${e}`},getHashTargetEl(t){let e=t.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},te=Pe;var ke=12*60*60*1e3,je="df",Ae="random-userid",re="session",Oe="apps",Ne="tab-id",He=window.localStorage,Ve=window.sessionStorage;function k(t,e=He){return te.getLocal(e,je,t)}function x(t,e,r=He){return R()?te.updateLocal(r,je,t,e,()=>e):null}function st(){return{id:v().replaceAll("-",""),expiry:new Date().getTime()+ke,live:[]}}function ne(){let t=k(re);return(!t||at(t))&&(t=st()),x(re,t)}function at({expiry:t}){return t<new Date().getTime()}var m={getUserId(){return k(Ae)||x(Ae,v())},getSessionId(){h("[session][getSessionId()] called!");let t=ne();return t?t.id:null},getTabId(){return h("[session][getTabId()] called!"),k(Ne,Ve)||x(Ne,v().replaceAll("-",""),Ve)},setLive(t){h("[session][setLive()] called!",t);let e=ne();if(e===null)return null;e.live.includes(t)||e.live.push(t),e.expiry=new Date().getTime()+ke,x(re,e),x(Oe,e.live.join())},getLastUsedApps(){return k(Oe)||""},isLive(...t){let e=ne();return e===null?!1:t.some(n=>e.live.includes(n))}};function lt(){return{"content-type":"application/json"}}function j(r){return l(this,arguments,function*(t,e={}){return(yield fetch(t,p({method:"GET",cache:"no-cache",mode:"cors",headers:lt()},e))).json()})}var oe=class{constructor(e){this.zone=e}add(c,a,f){return l(this,arguments,function*(e,r,{id:n,title:o,price:i},s=1){let A=`${this.url(e)}/cart/${m.getSessionId()||""}`,O=JSON.stringify({amount:s,id:n,title:o,price:i,index:r});return j(A,{method:"PUT",body:O})})}remove(e,r,n,o=1){return l(this,null,function*(){let i=`${this.url(e)}/cart/${m.getSessionId()||""}`,s=JSON.stringify({amount:o,id:n,index:r});return j(i,{method:"PATCH",body:s})})}clear(e){return l(this,null,function*(){let r=`${this.url(e)}/cart/${m.getSessionId()||""}`;return j(r,{method:"DELETE"})})}checkout(e){return l(this,null,function*(){let r=JSON.stringify({session_id:m.getSessionId(),user_id:m.getUserId(),sources:m.getLastUsedApps().split(",")});return j(`${this.url(e)}/checkout`,{method:"PUT",body:r})})}url(e){return`https://${this.zone}-search.doofinder.com/6/${e}/stats`}};var ct={get Session(){return m},buildCart(t){return new oe(t)}},Fe=ct;var ie=ce([V,F,M]),se=ue(ie);document.addEventListener("doofinder.register",t=>{let{name:e,entrypoint:r}=t.detail;ie[e].resolve(r)});var ut={vsn:"1.4.256",getRegistry(t){return ie[t]},load(t,e){E(),W(),Me(t,e,"search")},loadCategoryPages(t,e){E(),Ue(t),Me(t,e,"category_pages")},loadChat(t,e){E(),ve(t).then(r=>{r.css.forEach(b),se(F,function(n){$.then(()=>{let o=n.create(t);typeof e=="function"&&e(o)})}),r.js.forEach(S)})},loadQuiz(t,e){E(),xe(t).then(r=>{r.css.forEach(b),_(r.custom_css),se(M,function(n){$.then(()=>{let o=n.create(t);typeof e=="function"&&e(o)})}),r.js.forEach(S)})},enableDebug:he,disableDebug:me,setLayerServerUrl:Ce,setCDNServerUrl:Le,enableCookies:W,disableCookies:Re};function Me(t,e,r){we(t,r).then(n=>{var i;n.css.forEach(b),n.custom_css.forEach(_);let o=(i=n.custom_properties)==null?void 0:i.join(`
`);t=Ie(t,n),t.trigger=dt(t),se(V,function(s){$.then(()=>{let c=s.create(t);_(`#${c.mount.id} {
${o||""}
}`),r=="category_pages"&&c.open(t),typeof e=="function"&&e(c)})}),n.js.forEach(S)}).catch(n=>{console.error("[Doofinder] error retrieving resources:",n)})}function dt(t){let{autoload:e,trigger:r}=t,n=new K(r);return n.enabled=!e||e.trigger,n}Object.defineProperty(window,"Doofinder",{value:Fe,writable:!1});Object.defineProperty(window,"doofinderLoader",{value:ut,writable:!1});})();
